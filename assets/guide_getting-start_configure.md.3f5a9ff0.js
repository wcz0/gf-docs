import{_ as s,c as a,o as n,d as l}from"./app.ce21e48a.js";const i=JSON.parse('{"title":"服务","description":"","frontmatter":{},"headers":[{"level":2,"title":"配置文件","slug":"配置文件","link":"#配置文件","children":[{"level":3,"title":"上传限制","slug":"上传限制","link":"#上传限制","children":[]},{"level":3,"title":"日志配置","slug":"日志配置","link":"#日志配置","children":[]}]},{"level":2,"title":"配置文件模板","slug":"配置文件模板","link":"#配置文件模板","children":[]},{"level":2,"title":"配置方法","slug":"配置方法","link":"#配置方法","children":[{"level":3,"title":"配置对象","slug":"配置对象","link":"#配置对象","children":[]},{"level":3,"title":"配置方法","slug":"配置方法-1","link":"#配置方法-1","children":[]}]}],"relativePath":"guide/getting-start/configure.md","lastUpdated":1675081585000}'),o={name:"guide/getting-start/configure.md"},p=l(`<h1 id="服务" tabindex="-1">服务 <a class="header-anchor" href="#服务" aria-hidden="true">#</a></h1><h1 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-hidden="true">#</a></h1><p>GoFrame框架的WebServer配置管理非常方便，支持通过配置文件配置、多种配置文件格式、多种配置方式以及若干配置方法</p><h2 id="配置文件" tabindex="-1">配置文件 <a class="header-anchor" href="#配置文件" aria-hidden="true">#</a></h2><p>Server对象支持通过配置文件进行便捷的配置。支持的配置选项以及配置说明请查看接口文档说明，文档中有详细说明，以下章节不会对配置选项作介绍。</p><p>当使用g.Server(单例名称)获取Server单例对象时，将会自动通过默认的配置管理对象获取对应的Server配置。默认情况下会读取server.单例名称配置项，当该配置项不存在时，将会读取server配置项。</p><p>支持的配置文件配置项请参考 <code>Server</code>配置管理对象属性：<a href="https://pkg.go.dev/github.com/gogf/gf/v2/net/ghttp#ServerConfig" target="_blank" rel="noreferrer">https://pkg.go.dev/github.com/gogf/gf/v2/net/ghttp#ServerConfig</a></p><p>默认配置:</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:80</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">serverRoot</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/var/www/Server</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>使用 g.Server() 获取默认的单例对象时自动获取并设置该配置</p><p>多个配置:</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:80</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">serverRoot</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/var/www/Server</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">server1</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:8080</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">serverRoot</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/var/www/Server1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">server2</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:8088</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">serverRoot</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/var/www/Server2</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>通过单例对象名称获取对应配置的Server单例对象</p><div class="language-go"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 对应 server.server1 配置项</span></span>
<span class="line"><span style="color:#A6ACCD;">s1 </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> g</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Server</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">server1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 对应 server.server2 配置项</span></span>
<span class="line"><span style="color:#A6ACCD;">s2 </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> g</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Server</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">server2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 对应默认配置项 server</span></span>
<span class="line"><span style="color:#A6ACCD;">s3 </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> g</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Server</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">none</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 对应默认配置项 server</span></span>
<span class="line"><span style="color:#A6ACCD;">s4 </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> g</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Server</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"></span></code></pre></div><p>案例配置:</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:8199</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">serverRoot</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/var/www/Server</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">indexFiles</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">index.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">main.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">accessLogEnabled</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">errorLogEnabled</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">  </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">pprofEnabled</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">     </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">log-path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/var/log/ServerLog</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">session_Id_Name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">MySessionId</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">Session-path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">     </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/tmp/MySessionStoragePath</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">session_MaxAge</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">24h</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">DumpRouterMap</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">    </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"></span></code></pre></div><p>同理，配置属性项的名称也不区分大小写，单词间也支持使用 <code>-</code>/<code>_</code>符号连接</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>推荐配置文件中的配置项名称统一使用小驼峰的格式</p></div><h3 id="上传限制" tabindex="-1">上传限制 <a class="header-anchor" href="#上传限制" aria-hidden="true">#</a></h3><p><code>Server</code>对于客户端提交的数据是由大小限制的，主要有两个配置参数控制：</p><ul><li><code>MaxHeaderBytes</code>：请求头大小限制，请求头包括客户端提交的 <code>Cookie</code>数据，默认设置为 <code>10KB</code>。</li><li><code>ClientMaxBodySize</code>：客户端提交的 <code>Body</code>大小限制，同时也影响文件上传大小，默认设置为 <code>8MB</code>。</li></ul><h3 id="日志配置" tabindex="-1">日志配置 <a class="header-anchor" href="#日志配置" aria-hidden="true">#</a></h3><p>从 <code>v2</code>版本开始，<code>Server</code>增加了对配置文件中 <code>Logger</code>的配置项支持，主要是为了统一日志组件配置、并解决日志滚动切分的问题</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:8080</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">logger</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">                 </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/var/log/server</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">	    </span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">                 </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">{Y-m-d}.log</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">	    </span><span style="color:#F07178;">stdout</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">               </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">	    </span><span style="color:#F07178;">rotateSize</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">           </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">100M</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">	    </span><span style="color:#F07178;">rotateBackupLimit</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">10</span></span>
<span class="line"><span style="color:#A6ACCD;">	    </span><span style="color:#F07178;">rotateBackupExpire</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">60d</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">	    </span><span style="color:#F07178;">rotateBackupCompress</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">9</span></span>
<span class="line"><span style="color:#A6ACCD;">	    </span><span style="color:#F07178;">rotateCheckInterval</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">24h</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span></code></pre></div><p>其中logger项的参考 todo: 日志.</p><h2 id="配置文件模板" tabindex="-1">配置文件模板 <a class="header-anchor" href="#配置文件模板" aria-hidden="true">#</a></h2><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># 基本配置</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">address</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">             </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:80</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">                        </span><span style="color:#676E95;font-style:italic;"># 本地监听地址。默认&quot;:80&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">httpsAddr</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">           </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:443</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">                       </span><span style="color:#676E95;font-style:italic;"># TLS/HTTPS配置，同时需要配置证书和密钥。默认关闭</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">httpsCertPath</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#A6ACCD;">                           </span><span style="color:#676E95;font-style:italic;"># TLS/HTTPS证书文件本地路径，建议使用绝对路径。默认关闭</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">httpsKeyPath</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#A6ACCD;">                           </span><span style="color:#676E95;font-style:italic;"># TLS/HTTPS密钥文件本地路径，建议使用绝对路径。默认关闭</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">readTimeout</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">60s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">                        </span><span style="color:#676E95;font-style:italic;"># 请求读取超时时间，一般不需要配置。默认为60秒</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">writeTimeout</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">                          </span><span style="color:#676E95;font-style:italic;"># 数据返回写入超时时间，一般不需要配置。默认不超时（0）</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">idleTimeout</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">60s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">                        </span><span style="color:#676E95;font-style:italic;"># 仅当Keep-Alive开启时有效，请求闲置时间。默认为60秒</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">maxHeaderBytes</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">10240</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">                      </span><span style="color:#676E95;font-style:italic;"># 请求Header大小限制（Byte）。默认为10KB</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">keepAlive</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">           </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">                         </span><span style="color:#676E95;font-style:italic;"># 是否开启Keep-Alive功能。默认true</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">serverAgent</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">GoFrame HTTP Server</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;"># 服务端Agent信息。默认为&quot;GoFrame HTTP Server&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># 接口文档</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">openapiPath</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/api.json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># OpenAPI接口文档地址</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">swaggerPath</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/swagger</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 内置SwaggerUI展示地址</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># 静态服务配置</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">indexFiles</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">index.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">index.htm</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># 自动首页静态文件检索。默认为[&quot;index.html&quot;, &quot;index.htm&quot;]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">indexFolder</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">         </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">                        </span><span style="color:#676E95;font-style:italic;"># 当访问静态文件目录时，是否展示目录下的文件列表。默认关闭，那么请求将返回403</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">serverRoot</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/var/www</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">                   </span><span style="color:#676E95;font-style:italic;"># 静态文件服务的目录根路径，配置时自动开启静态文件服务。默认关闭</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">searchPaths</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/home/www</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/var/lib/www</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 提供静态文件服务时额外的文件搜索路径，当根路径找不到时则按照顺序在搜索目录查找。默认关闭</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">fileServerEnabled</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">   </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">                        </span><span style="color:#676E95;font-style:italic;"># 静态文件服务总开关。默认false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># Cookie配置</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">cookieMaxAge</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">365d</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">             </span><span style="color:#676E95;font-style:italic;"># Cookie有效期。默认为365天</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">cookiePath</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">                </span><span style="color:#676E95;font-style:italic;"># Cookie有效路径。默认为&quot;/&quot;表示全站所有路径下有效</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">cookieDomain</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#A6ACCD;">                 </span><span style="color:#676E95;font-style:italic;"># Cookie有效域名。默认为当前配置Cookie时的域名</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;"># Sessions配置</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">sessionMaxAge</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">24h</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">              </span><span style="color:#676E95;font-style:italic;"># Session有效期。默认为24小时</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">sessionIdName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">gfsessionid</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;"># SessionId的键名名称。默认为gfsessionid</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">sessionCookieOutput</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">               </span><span style="color:#676E95;font-style:italic;"># Session特性开启时，是否将SessionId返回到Cookie中。默认true</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">sessionPath</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/tmp/gsessions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># Session存储的文件目录路径。默认为当前系统临时目录下的gsessions目录</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># 日志基本配置</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">logPath</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">             </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#A6ACCD;">                 </span><span style="color:#676E95;font-style:italic;"># 日志文件存储目录路径，建议使用绝对路径。默认为空，表示关闭</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">logStdout</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">           </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">               </span><span style="color:#676E95;font-style:italic;"># 日志是否输出到终端。默认为true</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">errorStack</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">          </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">               </span><span style="color:#676E95;font-style:italic;"># 当Server捕获到异常时是否记录堆栈信息到日志中。默认为true</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">errorLogEnabled</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">     </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">               </span><span style="color:#676E95;font-style:italic;"># 是否记录异常日志信息到日志中。默认为true</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">errorLogPattern</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">     </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">error-{Ymd}.log</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># 异常错误日志文件格式。默认为&quot;error-{Ymd}.log&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">accessLogEnabled</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">    </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">              </span><span style="color:#676E95;font-style:italic;"># 是否记录访问日志。默认为false</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">accessLogPattern</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">access-{Ymd}.log</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 访问日志文件格式。默认为&quot;access-{Ymd}.log&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># 日志扩展配置(参数日志组件配置)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">logger</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">                  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/var/log/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># 日志文件路径。默认为空，表示关闭，仅输出到终端</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">file</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">                  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">{Y-m-d}.log</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;"># 日志文件格式。默认为&quot;{Y-m-d}.log&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">prefix</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;"># 日志内容输出前缀。默认为空</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">level</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">                 </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">all</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">         </span><span style="color:#676E95;font-style:italic;"># 日志输出级别</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">stdout</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">                </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">          </span><span style="color:#676E95;font-style:italic;"># 日志是否同时输出到终端。默认true</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">rotateSize</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">            </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">             </span><span style="color:#676E95;font-style:italic;"># 按照日志文件大小对文件进行滚动切分。默认为0，表示关闭滚动切分特性</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">rotateExpire</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">          </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">             </span><span style="color:#676E95;font-style:italic;"># 按照日志文件时间间隔对文件滚动切分。默认为0，表示关闭滚动切分特性</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">rotateBackupLimit</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">             </span><span style="color:#676E95;font-style:italic;"># 按照切分的文件数量清理切分文件，当滚动切分特性开启时有效。默认为0，表示不备份，切分则删除</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">rotateBackupExpire</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">             </span><span style="color:#676E95;font-style:italic;"># 按照切分的文件有效期清理切分文件，当滚动切分特性开启时有效。默认为0，表示不备份，切分则删除</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">rotateBackupCompress</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">  </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">             </span><span style="color:#676E95;font-style:italic;"># 滚动切分文件的压缩比（0-9）。默认为0，表示不压缩</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">rotateCheckInterval</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1h</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">          </span><span style="color:#676E95;font-style:italic;"># 滚动切分的时间检测间隔，一般不需要设置。默认为1小时</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># PProf配置</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">pprofEnabled</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">        </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">              </span><span style="color:#676E95;font-style:italic;"># 是否开启PProf性能调试特性。默认为false</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">pprofPattern</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&quot;&quot;</span><span style="color:#A6ACCD;">                 </span><span style="color:#676E95;font-style:italic;"># 开启PProf时有效，表示PProf特性的页面访问路径，对当前Server绑定的所有域名有效。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;"># 其他配置</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">clientMaxBodySize</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">810241024</span><span style="color:#A6ACCD;">          </span><span style="color:#676E95;font-style:italic;"># 客户端最大Body上传限制大小，影响文件上传大小(Byte)。默认为8*1024*1024=8MB</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">formParsingMemory</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">   </span><span style="color:#F78C6C;">1048576</span><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;"># 解析表单时的缓冲区大小(Byte)，一般不需要配置。默认为1024*1024=1MB</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">nameToUriType</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">       </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">                  </span><span style="color:#676E95;font-style:italic;"># 路由注册中使用对象注册时的路由生成规则。默认为0</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">routeOverWrite</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">      </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">              </span><span style="color:#676E95;font-style:italic;"># 当遇到重复路由注册时是否强制覆盖。默认为false，重复路由存在时将会在启动时报错退出</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">dumpRouterMap</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">       </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">               </span><span style="color:#676E95;font-style:italic;"># 是否在Server启动时打印所有的路由列表。默认为true</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">graceful</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">            </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">              </span><span style="color:#676E95;font-style:italic;"># 是否开启平滑重启特性，开启时将会在本地增加10000的本地TCP端口用于进程间通信。默认false       </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">gracefulTimeout</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">     </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">                  </span><span style="color:#676E95;font-style:italic;"># 父进程在平滑重启后多少秒退出，默认2秒。若请求耗时大于该值，可能会导致请求中断</span></span>
<span class="line"></span></code></pre></div><h2 id="配置方法" tabindex="-1">配置方法 <a class="header-anchor" href="#配置方法" aria-hidden="true">#</a></h2><h3 id="配置对象" tabindex="-1">配置对象 <a class="header-anchor" href="#配置对象" aria-hidden="true">#</a></h3><p>定义: <a href="https://pkg.go.dev/github.com/gogf/gf/v2/net/ghttp#ServerConfig" target="_blank" rel="noreferrer">https://pkg.go.dev/github.com/gogf/gf/v2/net/ghttp#ServerConfig</a></p><h3 id="配置方法-1" tabindex="-1">配置方法 <a class="header-anchor" href="#配置方法-1" aria-hidden="true">#</a></h3><p>方法列表: <a href="https://pkg.go.dev/github.com/gogf/gf/v2/net/ghttp#Server" target="_blank" rel="noreferrer">https://pkg.go.dev/github.com/gogf/gf/v2/net/ghttp#Server</a></p><ol><li>可以通过 <code>SetConfig</code>及 <code>SetConfigWithMap</code>来设置。</li><li>也可以使用 <code>Server</code>对象的 <code>Set*/Enable*</code>方法进行特定配置的设置。</li></ol><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>配置项在 <code>Server</code>执行 <code>Start</code>之后便不能再修改，防止产生并发安全问题。</p></div><h4 id="setconfigwithmap-方法" tabindex="-1">SetConfigWithMap 方法 <a class="header-anchor" href="#setconfigwithmap-方法" aria-hidden="true">#</a></h4><p>我们可以使用 <code>SetConfigWithMap</code>方法通过 <code>Key-Value</code>键值对来设置/修改 <code>Server</code>的特定配置，其余的配置使用默认配置即可</p><div class="language-go"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">s </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> g</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Server</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">SetConfigWithMap</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">g</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Map</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Address</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:80</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ServerRoot</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/var/www/MyServerRoot</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#A6ACCD;">s</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Run</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span></code></pre></div>`,37),e=[p];function t(c,r,y,D,F,C){return n(),a("div",null,e)}const u=s(o,[["render",t]]);export{i as __pageData,u as default};
